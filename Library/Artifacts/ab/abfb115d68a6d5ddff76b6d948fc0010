ight$=\"[[imageHeight]]\" style$=\"[[pickerBackgroundStyle]]\" alt=\"[[altLabelForImage]]\" class=\"style-scope ytd-backstage-image-preview-renderer\">\n      <div id=\"overlay\" on-mousemove=\"pickerMove\" on-mousedown=\"pickerMoveStart\" on-mouseup=\"pickerMoveComplete\" on-mouseleave=\"pickerMoveComplete\" class=\"style-scope ytd-backstage-image-preview-renderer\">\n      </div>\n      <div id=\"picker\" style$=\"[[pickerDisplayStyle]]\" class=\"style-scope ytd-backstage-image-preview-renderer\">\n        <img id=\"image-in-picker\" class$=\"[[imageOrientationStyle]] style-scope ytd-backstage-image-preview-renderer\" src$=\"[[imageData.localImageSrc]]\" width$=\"[[imageWidth]]\" height$=\"[[imageHeight]]\" style$=\"[[imageInPickerStyle]]\" alt=\"\" class=\"style-scope ytd-backstage-image-preview-renderer\">\n      </div>\n    </div>\n    <div class=\"buttons-container style-scope ytd-backstage-image-preview-renderer\">\n      <yt-button-renderer id=\"cancel-button\" data=\"[[cancelButton]]\" on-click=\"cancelReposition\" class=\"style-scope ytd-backstage-image-preview-renderer\">\n      </yt-button-renderer>\n      <yt-button-renderer id=\"save-button\" data=\"[[saveButton]]\" on-click=\"saveCropCoordinates\" class=\"style-scope ytd-backstage-image-preview-renderer\">\n      </yt-button-renderer>\n    </div>\n  </div>\n</div>\n<iron-a11y-keys keys=\"up down left right\" target=\"[[keyboardInterfaceTarget]]\" on-keys-pressed=\"onArrowKeysDown\" class=\"style-scope ytd-backstage-image-preview-renderer\">\n</iron-a11y-keys>\n");
a.content.insertBefore(V().content.cloneNode(!0),a.content.firstChild);var b=a.content,c=b.insertBefore;if(void 0===zUb){var d=document.createElement("template");K(d,"");
zUb=d}d=zUb;c.call(b,d.content.cloneNode(!0),a.content.firstChild);return AUb=a};var CUb=function(a,b,c,d,e){this.id=a;this.imageBlob=b;this.localImageSrc=c;this.JSC$25413_naturalWidth=d;this.JSC$25413_naturalHeight=e;this.previewCoordinates=this.JSC$25413_naturalHeight>this.JSC$25413_naturalWidth?{top:(this.JSC$25413_naturalHeight-this.JSC$25413_naturalWidth)/2/this.JSC$25413_naturalHeight,right:1,bottom:(this.JSC$25413_naturalHeight+this.JSC$25413_naturalWidth)/2/this.JSC$25413_naturalHeight,left:0}:{top:0,right:(this.JSC$25413_naturalWidth+this.JSC$25413_naturalHeight)/2/this.JSC$25413_naturalWidth,
bottom:1,left:(this.JSC$25413_naturalWidth-this.JSC$25413_naturalHeight)/2/this.JSC$25413_naturalWidth}};
function DUb(a,b,c){return t(function(d){return d.return(new Promise(function(e){var h=new Image;h.onload=function(){e(new CUb(a,b,c,h.naturalWidth,h.naturalHeight))};
h.src=c.toString()}))})}
;function EUb(a,b){return Math.round(a/1E-5)===Math.round(b/1E-5)}
var bO=function(){var a=N.apply(this,arguments)||this;a.a11yConfig=yUb;a.imageDisplayOffsetTop=0;a.imageDisplayOffsetLeft=0;a.pickerDisplayOffsetTop=0;a.pickerDisplayOffsetLeft=0;a.showPreviewContainer=!0;a.startPicker=!1;a.repositionOptional=!1;a.editOnlyMode=!1;a.savedImageDisplayOffsetTop=0;a.savedImageDisplayOffsetLeft=0;return a};
n(bO,N);f=bO.prototype;f.created=function(){bJ.requestAvailability()};
f.ready=function(){};
f.onArrowKeysDown=function(a){if(!this.showPreviewContainer&&this.pickerSize&&this.imageHeight&&this.imageWidth&&this.displayScale){a.detail.keyboardEvent.preventDefault();var b=0,c=0,d="";switch(a.detail.keyboardEvent.key){case"ArrowUp":EUb(this.imageDisplayOffsetTop+this.imageHeight,this.pickerDisplayOffsetTop+this.pickerSize)?d=this.a11yConfig.reachBottomOfImage:b=-.05*this.imageHeight;break;case"ArrowDown":EUb(this.pickerDisplayOffsetTop,this.imageDisplayOffsetTop)?d=this.a11yConfig.reachTopOfImage:
b=.05*this.imageHeight;break;case"ArrowLeft":EUb(this.pickerDisplayOffsetLeft+this.pickerSize,this.imageDisplayOffsetLeft+this.imageWidth)?d=this.a11yConfig.reachRightOfImage:c=-.05*this.imageWidth;break;case"ArrowRight":EUb(this.pickerDisplayOffsetLeft,this.imageDisplayOffsetLeft)?d=this.a11yConfig.reachLeftOfImage:c=.05*this.imageWidth;}d&&ht(d)&&qt(this.hostElement,"iron-announce",{text:ht(d)});if(c||b)this.imageHeight>this.imageWidth?(this.imageDisplayOffsetTop=Math.min(this.pickerDisplayOffsetTop,
Math.max(this.pickerDisplayOffsetTop+this.pickerSize-this.imageHeight,this.imageDisplayOffsetTop+b)),a=this.getPreviewPosition(this.pickerDisplayOffsetTop,this.pickerSize,this.imageDisplayOffsetTop,this.imageHeight),a=ht(this.a11yConfig.imageVerticalPosition,{x_percent:""+a,y_percent:""+(100-a)})):(this.imageDisplayOffsetLeft=Math.min(this.pickerDisplayOffsetLeft,Math.max(this.pickerDisplayOffsetLeft+this.pickerSize-this.imageWidth,this.imageDisplayOffsetLeft+c)),a=this.getPreviewPosition(this.pickerDisplayOffsetLeft,
this.pickerSize,this.imageDisplayOffsetLeft,this.imageWidth),a=ht(this.a11yConfig.imageHorizontalPosition,{x_percent:""+a,y_percent:""+(100-a)})),a&&qt(this.hostElement,"iron-announce",{text:a})}};
f.getPreviewPosition=function(a,b,c,d){return Math.round(100*(a+.5*b-c)/d)};
f.calculateDisplayPosition=function(){var a=this.imageData.JSC$25413_naturalWidth,b=this.imageData.JSC$25413_naturalHeight;this.displayScale=Math.max(200/a,200/b);this.pickerDisplayOffsetTop=this.pickerDisplayOffsetLeft=50;var c=a*this.displayScale*this.imageData.previewCoordinates.left,d=b*this.displayScale*this.imageData.previewCoordinates.top;this.imageDisplayOffsetLeft=b>a?this.pickerDisplayOffsetLeft:this.pickerDisplayOffsetLeft-c;this.savedImageDisplayOffsetTop=this.imageDisplayOffsetTop=a>
b?this.pickerDisplayOffsetTop:this.pickerDisplayOffsetTop-d;this.savedImageDisplayOffsetLeft=this.imageDisplayOffsetLeft;this.imageWidth=a*this.displayScale;this.imageHeight=b*this.displayScale};
f.onImageChange=function(){this.imageData&&(this.editOnlyMode||(this.showPreviewContainer=!0),this.calculateDisplayPosition())};
f.onEditOnlyModeUpdate=function(){this.showPreviewContainer=!this.editOnlyMode};
f.getSignedPosition=function(a,b,c){return"X"===b&&"rtl"===Mi("HTML_DIR")?"-"===c?a+"px":-1*a+"px":"-"===c?-1*a+"px":a+"px"};
f.pickerMove=function(a){if(this.startPicker&&!this.showPreviewContainer&&this.pickerSize&&void 0!==this.pickerOffsetX&&void 0!==this.pickerOffsetY&&this.imageHeight&&this.imageWidth&&this.displayScale){var b=this.pickerOffsetX-a.clientX,c=this.pickerOffsetY-a.clientY;this.pickerOffsetX=a.clientX;this.pickerOffsetY=a.clientY;this.imageHeight>this.imageWidth?this.imageDisplayOffsetTop=Math.min(this.pickerDisplayOffsetTop,Math.max(this.pickerDisplayOffsetTop+this.pickerSize-this.imageHeight,this.imageDisplayOffsetTop-
c)):this.imageDisplayOffsetLeft=Math.min(this.pickerDisplayOffsetLeft,Math.max(this.pickerDisplayOffsetLeft+this.pickerSize-this.imageWidth,this.imageDisplayOffsetLeft-b))}};
f.pickerMoveStart=function(a){this.startPicker=!0;this.pickerOffsetX=a.clientX;this.pickerOffsetY=a.clientY};
f.pickerMoveComplete=function(){this.startPicker=!1;this.pickerOffsetY=this.pickerOffsetX=void 0;var a=this.generateCropPreview();a&&qt(this.hostElement,"ytd-backstage-image-preview-coordinates-update",a)};
f.cancelReposition=function(){this.editOnlyMode||(this.imageDisplayOffsetTop=this.savedImageDisplayOffsetTop,this.imageDisplayOffsetLeft=this.savedImageDisplayOffsetLeft,this.startPicker=!1,this.showPreviewContainer=!0);qt(this.hostElement,"ytd-backstage-image-preview-coordinates-cancel")};
f.deleteImage=function(){qt(this.hostElement,"ytd-backstage-image-preview-delete")};
f.editCropCoordinates=function(){this.showPreviewContainer=!1};
f.saveCropCoordinates=function(){this.editOnlyMode||(this.savedImageDisplayOffsetTop=this.imageDisplayOffsetTop,this.savedImageDisplayOffsetLeft=this.imageDisplayOffsetLeft,this.startPicker=!1,this.showPreviewContainer=!0);var a=this.generateCropPreview();a&&qt(this.hostElement,"ytd-backstage-image-preview-coordinates-save",a)};
f.getPreviewOffset=function(a,b,c){return b&&a?("X"===c&&"rtl"===Mi("HTML_DIR")?300/b*a:300/b*a*-1)+"px":"0px"};
f.getSimpleText=function(a){return a?qw(a):""};
f.generateCropPreview=function(){if(this.imageWidth&&this.imageHeight&&this.pickerSize)return{top:this.cropOffsetTop/this.imageHeight,right:(this.cropOffsetLeft+this.pickerSize)/this.imageWidth,bottom:(this.cropOffsetTop+this.pickerSize)/this.imageHeight,left:this.cropOffsetLeft/this.imageWidth}};
g.Object.defineProperties(bO.prototype,{altLabelForImage:{configurable:!0,enumerable:!0,get:function(){if(!this.imageWidth||!this.imageHeight||!this.pickerSize)return"";if(this.imageHeight>this.imageWidth){var a=this.getPreviewPosition(this.pickerDisplayOffsetTop,this.pickerSize,this.imageDisplayOffsetTop,this.imageHeight);return ht(this.a11yConfig.imageVerticalPosition,{x_percent:""+a,y_percent:""+(100-a)})+"\n"+ht(this.a11yConfig.verticalRepositionInstruction)}a=this.getPreviewPosition(this.pickerDisplayOffsetLeft,
this.pickerSize,this.imageDisplayOffsetLeft,this.imageWidth);return ht(this.a11yConfig.imageHorizontalPosition,{x_percent:""+a,y_percent:""+(100-a)})+"\n"+ht(this.a11yConfig.horizontalRepositionInstruction)}},
pickerSize:{configurable:!0,enumerable:!0,get:function(){return this.imageHeight&&this.imageWidth?this.imageHeight>this.imageWidth?this.imageWidth:this.imageHeight:0}},
imageOrientationStyle:{configurable:!0,enumerable:!0,get:function(){if(this.imageHeight&&this.imageWidth)return this.imageHeight===this.imageWidth?"SQUARE":this.imageHeight>this.imageWidth?"PORTRAIT":"LANDSCAPE"}},
editButton:{configurable:!0,enumerable:!0,get:function(){var a,b,c=null==(a=this.instruction)?void 0:null==(b=a.previewInstruction)?void 0:b.editButtonLabel;return c?{size:"SIZE_SMALL",style:"STYLE_SUGGESTIVE",text:c,accessibilityData:{accessibilityData:{label:this.getSimpleText(c)}}}:void 0}},
saveButton:{configurable:!0,enumerable:!0,get:function(){var a,b,c,d,e=this.editOnlyMode?null==(a=this.instruction)?void 0:null==(b=a.editInstruction)?void 0:b.saveImagesButtonLabel:null==(c=this.instruction)?void 0:null==(d=c.editInstruction)?void 0:d.saveButtonLabel;return e?{style:"STYLE_SUGGESTIVE",size:"SIZE_SMALL",text:e,accessibilityData:{accessibilityData:{label:this.getSimpleText(e)}}}:void 0}},
deleteButton:{configurable:!0,enumerable:!0,get:function(){var a,b,c=null==(a=this.instruction)?void 0:null==(b=a.previewInstruction)?void 0:b.deleteButtonLabel;return c?{size:"SIZE_SMALL",text:c,accessibilityData:{accessibilityData:{label:this.getSimpleText(c)}}}:void 0}},
cancelButton:{configurable:!0,enumerable:!0,get:function(){var a,b,c=null==(a=this.instruction)?void 0:null==(b=a.editInstruction)?void 0:b.cancelButtonLabel;a=this.editOnlyMode?"STYLE_BLUE_TEXT":"STYLE_TEXT";return c?{style:a,size:"SIZE_SMALL",text:c,accessibilityData:{accessibilityData:{label:this.getSimpleText(c)}}}:void 0}},
cropOffsetTop:{configurable:!0,enumerable:!0,get:function(){return void 0===this.imageDisplayOffsetTop||void 0===this.pickerDisplayOffsetTop?0:this.pickerDisplayOffsetTop-this.imageDisplayOffsetTop}},
cropOffsetLeft:{configurable:!0,enumerable:!0,get:function(){return void 0===this.imageDisplayOffsetLeft||void 0===this.pickerDisplayOffsetLeft?0:this.pickerDisplayOffsetLeft-this.imageDisplayOffsetLeft}},
pickerBackgroundStyle:{configurable:!0,enumerable:!0,get:function(){return Tb({transform:"translateX("+this.getSignedPosition(this.imageDisplayOffsetLeft,"X",void 0)+") translateY("+this.getSignedPosition(this.imageDisplayOffsetTop,"Y",void 0)+")"})}},
pickerDisplayStyle:{configurable:!0,enumerable:!0,get:function(){return Tb({width:this.pickerSize+"px",height:this.pickerSize+"px",transform:"translateX("+this.getSignedPosition(this.pickerDisplayOffsetLeft,"X",void 0)+") translateY("+this.getSignedPosition(this.pickerDisplayOffsetTop,"Y",void 0)+")"})}},
imageInPickerStyle:{configurable:!0,enumerable:!0,get:function(){return Tb({transform:"translateX("+this.getSignedPosition(this.cropOffsetLeft,"X","-")+") translateY("+this.getSignedPosition(this.cropOffsetTop,"Y","-")+")"})}},
previewClipperStyle:{configurable:!0,enumerable:!0,get:function(){return Tb({transform:"translateX("+this.getPreviewOffset(this.cropOffsetLeft,this.pickerSize,"X")+") translateY("+this.getPreviewOffset(this.cropOffsetTop,this.pickerSize,"Y")+")"})}},
pickerModeStyle:{configurable:!0,enumerable:!0,get:function(){return this.showPreviewContainer?"preview":"edit"}}});
g.Object.defineProperties(bO,{template:{configurable:!0,enumerable:!0,get:function(){return BUb()}}});
var cO=bO;cO.prototype.onEditOnlyModeUpdate=cO.prototype.onEditOnlyModeUpdate;cO.prototype.onImageChange=cO.prototype.onImageChange;u([T(),v("design:type",CUb)],cO.prototype,"imageData",void 0);u([T(),v("design:type",Object)],cO.prototype,"instruction",void 0);u([T(),v("design:type",Object)],cO.prototype,"a11yConfig",void 0);u([T(),v("design:type",Number)],cO.prototype,"imageWidth",void 0);u([T(),v("design:type",Number)],cO.prototype,"imageHeight",void 0);
u([T(),v("design:type",Number)],cO.prototype,"displayScale",void 0);u([T(),v("design:type",Object)],cO.prototype,"imageDisplayOffsetTop",void 0);u([T(),v("design:type",Object)],cO.prototype,"imageDisplayOffsetLeft",void 0);u([T(),v("design:type",Object)],cO.prototype,"pickerDisplayOffsetTop",void 0);u([T(),v("design:type",Object)],cO.prototype,"pickerDisplayOffsetLeft",void 0);u([T(),v("design:type",Object)],cO.prototype,"showPreviewContainer",void 0);
u([T(),v("design:type",Object)],cO.prototype,"startPicker",void 0);u([T(),v("design:type",Number)],cO.prototype,"pickerOffsetX",void 0);u([T(),v("design:type",Number)],cO.prototype,"pickerOffsetY",void 0);u([T(),v("design:type",Object)],cO.prototype,"repositionOptional",void 0);u([T(),v("design:type",Object)],cO.prototype,"editOnlyMode",void 0);u([Ux("#picker-container"),v("design:type",HTMLElement)],cO.prototype,"JSC$13006_pickerContainer",void 0);
u([Ux("#picker"),v("design:type",HTMLElement)],cO.prototype,"picker",void 0);u([Ux("#preview-clipper"),v("design:type",HTMLElement)],cO.prototype,"previewClipper",void 0);u([Ux("#image-in-picker-background"),v("design:type",HTMLImageElement)],cO.prototype,"JSC$13006_imageInBackground",void 0);u([Ux("#image-in-picker"),v("design:type",HTMLImageElement)],cO.prototype,"JSC$13006_imageInPicker",void 0);
u([Ux("#image-in-preview-clipper"),v("design:type",HTMLImageElement)],cO.prototype,"JSC$13006_imageInPreviewClipper",void 0);u([P("pickerSize","imageWidth","imageHeight","pickerDisplayOffsetTop","imageDisplayOffsetTop"),v("design:type",String),v("design:paramtypes",[])],cO.prototype,"altLabelForImage",null);u([P("imageHeight","imageWidth"),v("design:type",Number),v("design:paramtypes",[])],cO.prototype,"pickerSize",null);
u([P("imageHeight","imageWidth"),v("design:type",Object),v("design:paramtypes",[])],cO.prototype,"imageOrientationStyle",null);u([P("instruction"),v("design:type",Object),v("design:paramtypes",[])],cO.prototype,"editButton",null);u([P("instruction"),v("design:type",Object),v("design:paramtypes",[])],cO.prototype,"saveButton",null);u([P("instruction"),v("design:type",Object),v("design:paramtypes",[])],cO.prototype,"deleteButton",null);
u([P("instruction"),v("design:type",Object),v("design:paramtypes",[])],cO.prototype,"cancelButton",null);u([P("imageDisplayOffsetTop","pickerDisplayOffsetTop"),v("design:type",Number),v("design:paramtypes",[])],cO.prototype,"cropOffse