"),this._data.setValue("color#data",t),this._data.setValue("ac#application","spark-web")},setHex:function(e){this.setRGB(r.hexToRgb(e))},getValue:function(){return this.rgb()},rgb:function(){var e=this._getValue();return e?e.value:{r:0,g:0,b:0}},hex:function(){return r.rgbToHex(this.rgb())},hsl:function(){return r.rgbToHsl(this.rgb())},lightened:function(e){return r.lighten(this.rgb(),e)}})}.apply(t,i))||(e.exports=r)},3817:function(e,t,n){var i,r;i=[n(16),n(9),n(2),n(2304),n(298)],void 0===(r=function(e,t,n,i,r){"use strict";return i.extend({type:"font",valueProp:"font#data",friendlyName:function(){return this._data.getValue("name")},getFontFaceName:function(e,t){return t||console.warn("NOTE: AuthoringContextFont.getFontFaceName() has been deprecated - use AuthoringContextFont.getFontFace() instead."),r.getFont(e||this.getLookupKey()).then((function(e){return e&&e.face?e.face.metrics.family:""}))},getFontSubgroupName:function(e,t){return t||console.warn("NOTE: AuthoringContextFont.getFontSubgroupName() has been deprecated - use AuthoringContextFont.getFontSubgroup() instead."),r.getFont(e||this.getLookupKey()).then((function(e){return e&&e.face?e.subgroup.name+" "+e.face.name:""}))},getFontFace:function(e){return r.getFont(e||this.getLookupKey()).then((function(e){return e&&e.subgroup&&e.face?e.subgroup.name+" "+e.face.name:""}))},getFontSubgroup:function(e){return r.getFont(e||this.getLookupKey()).then((function(e){return e&&e.subgroup?e.subgroup.name:""}))},getLookupKey:function(){var e=this._getValue();if(e)return e.lookupKey},setLookupKey:function(e){var t=this._getValue();"object"==typeof e&&"tk-synced"===e.type?this._setTypekitSyncedFont(e,t):t.lookupKey=e,this.setValue(t)},_setTypkitSyncedFont:function(e,t){console.warn("set synced font info",e),t.lookupKey=null,t.source="tk-synced"},getCSSName:function(e){return r.getFont(e||this.getLookupKey()).then((function(e){return e?e.subgroup.cssName:""}))},getInfo:function(e){return n.all([this.getFontFaceName(e,!0),this.getFontSubgroupName(e,!0),this.getCSSName(e),this.getFontStyles(e),this.getFontFace(e),this.getFontSubgroup(e)]).spread(function(t,n,i,r,o,a){return{acFont:this,id:e||this.getId(),lookupKey:e||this.getLookupKey(),faceName:t,subgroupName:n,cssName:i,fontStyle:r.style,fontWeight:r.weight,face:o,subgroup:a}}.bind(this))},getFontStyles:function(e){return r.getFont(e||this.getLookupKey()).then((function(e){if(e&&e.face){var t=e.face.typekitKey.split("");return{style:{i:"italic",n:"normal"}[t[0]],weight:{1:100,2:200,3:300,4:400,5:500,6:600,7:700,8:800,9:900}[t[1]]}}}))}})}.apply(t,i))||(e.exports=r)},3818:function(e,t,n){n(9);var i,r,o,a=n(3819),s=n(2),c=!1;try{c=!!window}catch(l){}e.exports&&!c||(i=n(1),r=i.cps,o=i.key);e.exports=function(e,t){return a.extend({host:r,endPoints:{resource:"/api/v2/resources/:resourcePath",resourceS3:"/api/v2/resources/:resourcePath/\\:S3",resourceMetadata:"/api/v2/resources/:resourcePath/\\:metadata",alias:"/api/v2/"+e+"/alias",asset:"/api/v2/"+e+"/assets/:assetId",assets:"/api/v2/"+e+"/assets",health:"/api/v2/health",videoEmbed:"/api/v2/"+e+"/assets/:asset_id/video/embed",website:"/api/v2/"+e+"/assets/:asset_id/website",site:"/content/2/site/:assetId/:itemPath",like:"/api/v2/"+e+"/assets/:assetId/likes",unlike:"/api/v2/"+e+"/assets/:assetId/likes",report:"/api/v2/"+e+"/assets/:assetId/report",artwork:"/api/v2/"+e+"/assets/:assetId/artwork",original:"/api/v2/"+e+"/assets/:assetId/original",originalForPath:"/api/v2/"+e+"/assets/:assetId/original/:path",originalForPathAndVersion:"/api/v2/"+e+"/assets/:assetId/original/:path/version/:version",serverCopy:"/api/v2/resources/:resourcePath/\\:copy"},protocol:"https:",defaultParams:{api_key:o},getResourceMetadata:function(e,t){return this.request({method:"GET",url:this.url("resourceMetadata",{},e),token:t})},checkAsset:function(e){return this.request({method:"GET",url:this.url("asset",{},e)}).then((function(e){return 200==e.statusCode}))},getAsset:function(e){return this.request({method:"GET",url:this.url("asset",{},e)})},getOriginalForPath:function(e,t,n){var i;return i=n?this.url("originalForPathAndVersion",{},e,t,n):this.url("originalForPath",{},e,t),this.request({method:"GET",url:i})},getMetadata:function(e){return this.request({method:"GET",url:this.url("asset",{},e)}).then((function(e){return e.body}))},checkResource:function(e,t){return this.request({method:"GET",url:this.url("resourceS3",{},e),token:t}).then((function(e){return 200==e.statusCode}))},uploadResource:function(e,n,i,r,o){var a={"Content-Type":n};r&&(a["If-Match"]="*");var s={method:"PUT",url:this.url("resource",{},e),body:i,headers:a,token:o};return"application/json"==n&&(s.json=!0),this.request(s).then((function(e){return t?e:e.body}))},publishAsset:function(e,n,i,r,o,a){var s,c,l;return i?(c="PUT",l=this.url("asset",{},i),s=r):(c="POST",l=this.url("assets"),s={resource_path:e,resource_type:n,metadata:r}),this.request({method:c,url:l,json:!0,body:s,token:o,serviceToken:a}).then((function(e){if(t)return e;var n=e.headers.Location||e.headers.location;if(n){var r=n.replace(/\/*$/,"").split("/");i=r[r.length-1]}return i}))},updateMetadata:function(e,t){return this.publishAsset(void 0,void 0,e,t)},serverSideCopy:function(e,t){if(!t||!t.length)return s.resolve([]);var n=s.defer(),r=function(e){this.request({method:"GET",url:e+"?api_key="+i.key}).then((function(t){var i=t.body;"in_progress"==i.status||"queued"==i.status?setTimeout((function(){r(e)}),500):"done"==i.status?n.resolve(i.outputs):"failed"==i.status?n.reject(new Error("CP server side copy failed with error code: "+i.error_code)):n.reject(new Error("CP server side copy returned illegal status: "+i.status+" : url:"+t.responseURL))})).catch((function(e){n.reject(new Error("CP server side copy failed with error: "+e.message+" "+e.stack))}))}.bind(this);return this.request({method:"POST",url:this.url("serverCopy",{},e),json:!0,body:{copy:{files:t}}}).then((function(e){var t=e.headers.Location||e.headers.location;r(t)})),n.promise},updateArtwork:function(e,t,n){return this.request({method:"PUT",url:this.url("artwork",{},e),token:n,json:!0,body:{resource_path:t}})},reserveAlias:function(e){return this.request({method:"POST",url:this.url("alias",{}),token:e}).then((function(e){if(console.log({type:"pageServerPublish",message:"alias was not passed in meaning we need to reserve one. got: "+e.body.alias}),200==e.statusCode)return e.body.alias;throw new Error("CP came back with "+e.statusCode+" "+e.body)}))}})}},3819:function(e,t,n){var i,r=n(9),o=n(2);function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var s=n(3820),c=!1;try{c=!!window}catch(h){}if(e.exports&&!c)i=function(e){return o.resolve(e)};else{var l=n(13);i=function(){return l.getAccessToken()}}var u={methods:{setHost:function(e){this.host=e},setDefaultParams:function(e){this.defaultParams=e},setProtocol:function(e){this.protocol=e},url:function(e,t){var n=Array.prototype.slice.call(arguments);if(e=this.endPoints[e]){var i,o=2,a=!1,s=e.replace(/[^\\]{1}\:([^\/]*)/g,(function(e,t){if("string"==typeof(i=n[o++])||"number"==typeof i)return"/"+i;a=!0}));if(s=s.replace(/\\\:/,":"),o>2&&o!=n.length)throw new Error("URL helper must be called with same number of path params to match endpoint string");if(a)throw new Error("URL helper must be called with string arguments only");t=r.extend({},this.defaultParams,t||{});var c="";for(var l in o=0,t)t.hasOwnProperty(l)&&(c+=(o?"&":"?")+l+"="+t[l],o++);return(this.protocol||"http:")+"//"+this.host+s+c}},request:function(e){var t=r.extend({},e),n=r.extend({},t.headers),c=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a();n["X-Request-Id"]=c,t.json&&(n["Content-Type"]="application/json",t.body=JSON.stringify(t.body)),delete t.json;t.method,t.url;return i(t.token).then(function(e){return t.serviceToken?(n["X-User-Token"]=e,n.Authorization=t.serviceToken):n.Authorization=e,delete t.token,delete t.serviceToken,t.headers=n,function(e){var t=o.defer();return s(e,(function(e,n){e?t.reject(e):t.resolve(n)})),t.promise}(t)}.bind(this)).then((function(e){var t;try{t=JSON.parse(e.body)}catch(n){t=e.body}return e.body=t,!e.headers&&e.getAllResponseHeaders&&(e.headers=function(e){var t={};if(!e)return t;for(var n=(e=e.replace(/^(\r?\n)*/,"")).split("\r\n"),i=0;i<n.length;i++){var r=n[i],o=r.indexOf(": ");if(o>0){var a=r.substring(0,o),s=r.substring(o+2);t[a]=s}}return t}(e.getAllResponseHeaders())),e}))}},mixin:function(e){return e.prototype=r.extend(e.prototype,u.methods),e},extend:function(e){return r.extend(e,u.methods)}};e.exports=u},3821:function(e,t,n){var i,r;i=[n(16),n(9),n(2),n(2304),n(1615)],void 0===(r=function(e,t,n,i,r){"use strict";return i.extend({type:"logo",valueProp:void 0,setContext:function(e){this._context=e},getHrefAsync:function(e,t){t=t||"image/png";var i=this._context,r=this.getData();if(i){var o=i.composite.getChildWithMap("logos."+r.getValue("path")+".!image");if(o)return i.composite.getImageComponentHref(o,e,t)}return n.resolve(null)},load:function(e,t){var i=n.defer();return this.getHrefAsync(e,t).then(function(e){var t=new Image;t.onload=function(){i.resolve(e)},t.onerror=function(e){i.reject(e)},e?t.src=e:(console.warn("href for logo "+this.getId()+" could not be found"),i.resolve(void 0))}.bind(this)).catch((function(e){i.reject(e)})),i.promise}})}.apply(t,i))||(e.exports=r)},406:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var i=n(4),r=n.n(i),o=n(3),a=n.n(o),s=n(33),c=n.n(s),l=n(32),u=n.n(l),h=n(34),d=n.n(h),g=n(67),f=n.n(g),m=n(99),p=n.n(m),v=(n(2),n(1)),w=n.n(v),b=n(13),y=n.n(b),C=n(142),M=function(e){function t(e){var n,i;if(r()(this,t),(n=c()(this,u()(t).call(this,e)))._links=e._links,n.id=e.id,n.urn=e.library_urn,n.name=e.name,n.version=e.version,n.created=e.created_date,n.modified=e.modified_date,n.ownership=e.ownership||"",n._canOnlyBeEditedByXD=!(!e.document_type&&!e.document_id),n.cacheList="team"===e.ownership?"incoming":e.ownership,e.collaboration&&e.collaboration.collaborators?n.collaborators=e.collaboration.collaborators:n.collaborators=[],n.storagePath=e.storage_path,n.bookmark=e.bookmark,n.orgId="team"===e.ownership?e.org_id:void 0,n.publinkMetadata=e.publink_metadata,n.ownerId=e.owner_id,n.hasPublicLink=e.collaboration&&e.collaboration.public,e.asset_acl)if(e.asset_acl.describedBy)i=e.asset_acl.describedBy;else{var o=e.asset_acl["*"];if(o)i=o;else{var a=Object.keys(e.asset_acl).find((function(e){return-1!==e.search("primary")})),s=e.asset_acl[a];if(s)i=s;else{var l=Object.keys(e.asset_acl).find((function(e){return-1!==e.search("repository")})),h=e.asset_acl[l];i=h||[]}}}var d=Array.from(new Set(i));n.acl=d.reduce((function(e,t){return e[t]=!0,e}),{});var g=e.rendition_grid,f=g&&g.main,m=g&&g.tiles;return n.renditionGrid=[],g&&(n.renditionGrid=f?[f.rendition]:[void 0],m&&(n.renditionGrid=n.renditionGrid.concat(m.map((function(e){return e?e.rendition:void 0}))))),n}return d()(t,e),a()(t,[{key:"toJSON",value:function(){return{id:this.id,urn:this.urn,name:this.name,version:this.version,created:this.created,modified:this.modified,ownership:this.ownership,collaborators:this.getListOfCollaboratorNames()}}},{key:"belongsToUser",value:function(){return"private"===this.ownership||"outgoing"===this.ownership}},{key:"isSharedWithUser",value:function(){return"incoming"===this.ownership||"team"===this.ownership}},{key:"hasCollaborators",value:function(){return"incoming"===this.ownership||this.collaborators&&this.collaborators.length>1}},{key:"isFollowedByUser",value:function(){return!!(this.isPublic()&&this.bookmark&&this.bookmark.created)}},{key:"isPublic",value:function(){return"public"===this.ownership}},{key:"isTeam",value:function(){return"team"===this.ownership}},{key:"hasRenditionGridTiles",value:function(){return!!this.renditionGrid&&this.renditionGrid.length>1}},{key:"getBookmarkId",value:function(){return this.bookmark?this.bookmark.id:void 0}},{key:"getRenditionHrefFromGrid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=this.renditionGrid[e];return n&&"string"==typeof n&&0===n.search(/^http/)&&t?this.getProxyRenditionHref(n,1e3):n}},{key:"getTemplateElements",value:function(){return p()(this.elements,(function(e){var t=e.getRepresentationsByType("application/vnd.adobe.theo.document+dcx");return t&&1===t.length}))}},{key:"getPrimaryRenditionHref",value:function(){return this.getRenditionHrefFromGrid(0,!0)}},{key:"setCollaboration",value:function(e){this.collaborators=e}},{key:"getListOfCollaboratorNames",value:function(){return(this.collaborators||[]).map((function(e){return e.displayName||e.email}))}},{key:"_getCollabEntry",value:function(){var e=y.a.getProfile();return f()(this.collaborators||[],(function(t){return e.userId&&t.collaborator===e.userId}))}},{key:"getRole",value:function(){if(this.bookmark&&"collab"===this.bookmark.type&&this.bookmark.role)return this.bookmark.role;var e=this._getCollabEntry();return e?e.role:void 0}},{key:"hasTeamAcl",value:function(e){return!!this.acl[e]}},{key:"canOnlyBeEditedByXD",value:function(){return this._canOnlyBeEditedByXD}},{key:"canEdit",value:function(){return this.isTeam()?!!this.hasTeamAcl("write"):this.belongsToUser()||"editor"===this.getRole()}},{key:"canDelete",value:function(){return this.belongsToUser()||this.isTeam()&&this.hasTeamAcl("delete")}},{key:"_getCanReshare",value:function(){if(this.isTeam())return!0;var e=this._getCollabEntry();return!!e&&e.canShare}},{key:"canShare",value:function(){return this.belongsToUser()||this._getCanReshare()}},{key:"getStorageURL",value:function(){var e=w.a.ss.replace("-creativesdk","");return"https://".concat(e,"/id/").concat(this.urn)}}]),t}(C.a)},407:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return D}));var i=n(4),r=n.n(i),o=n(3),a=n.n(o),s=n(33),c=n.n(s),l=n(32),u=n.n(l),h=n(34),d=n.n(h),g=n(99),f=n.n(g),m=n(67),p=n.n(m),v=n(65),w=n.n(v),b=n(2),y=n.n(b),C=n(19),M=n.n(C),L=n(142),x=function(e){function t(e){var n;return r()(this,t),(n=c()(this,u()(t).call(this,e)))._links=e._links,n.library=e.library,n.id=e.id,n.type=e.type,n.version=e.version,n.relationship=e.relationship,n.path=e.path,n.isComponent=e.is_component,n.isPublic=e.is_public,n.isMocked=e.is_mocked,n.storageHref=e.storage_href,n.etag=e.etag,n.width=e.width,n.height=e.height,n.linkType=e.linktype,n.contentLength=e.content_length,n.stockData=e["adobestock#trackingdata"],n.sparkTrackingData=e.spark_tracking_data,n.brandUrn=n.sparkTrackingData?n.sparkTrackingData.brand_urn:void 0,n.theoPageCount=n.sparkTrackingData?n.sparkTrackingData.theoPageCount:void 0,n}return d()(t,e),a()(t,[{key:"getRenditionHref",value:function(e){return this.isMocked?this.storageHref:((t=this.getLink("rendition",{size:1e3}))||(t=this.getLink("primary")),t?this.getProxyRenditionHref(t,1e3):(t=(this.isPublic?"/image_assets/public/adobe-libraries/":"/image_assets/adobe-libraries/")+this.library.id+"/?asset_id="+this.id,this.type&&(t+="&size="+(e||1e3),-1===["image/jpg","image/jpeg","image/png"].indexOf(this.type)?t+="&mime="+encodeURIComponent("image/png"):t+="&mime="+encodeURIComponent(this.type)),t));var t}},{key:"toJSON",value:function(){var e={id:this.id,type:this.type,relationship:this.relationship,path:this.path};this.storageHref&&(e.storageHref=this.storageHref),this.etag&&(e.etag=this.etag),this.width&&(e.width=this.width),this.height&&(e.height=this.height),this.stockData&&(e.stockData=this.stockData);var t=this.getRenditionHref();return t&&(e.renditionHref=t),e}}]),t}(L.a);var D=function(e){function t(e){var n;return r()(this,t),(n=c()(this,u()(t).call(this,e)))._links=e._links,n.library=e.library,n.id=e.id,n.name=e.name,n.thumbnail=e.thumbnail?e.thumbnail.rendition:void 0,n.type=e.type,n.created_date=e.created_date?e.created_date:void 0,n.modified_date=e.modified_date?e.modified_date:void 0,n.description=e.details?e.details.description:void 0,n.storage_used=e.storage_used,n.setRepresentations(e.representations||[]),n}return d()(t,e),a()(t,[{key:"setRepresentations",value:function(e){var t=this;this.representations=e.map((function(e){return new x(w()(e,{library:t.library}))}))}},{key:"getTemplateDcxRepresentation",value:function(){return p()(this.representations,(function(e){return"application/vnd.adobe.theo.document+dcx"===e.type||"application/vnd.adobe.theo.document+dcxucf"===e.type}))}},{key:"getRepresentationsByType",value:function(e){return e instanceof RegExp?f()(this.representations,(function(t){return-1!==t.type.search(e)})):f()(this.representations,(function(t){return t.type===e}))}},{key:"getComponentRepresentation",value:function(){return p()(this.representations,(function(e){return e.isComponent}))}},{key:"getDateString",value:function(e){var t=60*(new Date).getTimezoneOffset()*1e3-252e5,n=new Date(e-t),i=n.toLocaleDateString(),r=n.getHours(),o=r>12;r=o?r-12:r;var a=n.getMinutes(),s=M.a.getString("timeformat-abbr-am"),c=M.a.getString("timeformat-abbr-pm");return"".concat(i,", ").concat(r,":").concat(a).concat(o?c:s)}},{key:"getPrimaryRepresentation",value:function(){if(!this.primaryRepresentation){var e=f()(this.representations,(function(e){return"primary"===e.relationship}));this.primaryRepresentation=e&&e.length>0?e[0]:void 0}return this.primaryRepresentation}},{key:"getPrimaryImageRepresentation",value:function(){return this.primaryImageRepresentation||(this.primaryImageRepresentation=this.getRepresentationsByType(/image/)[0]),this.primaryImageRepresentation}},{key:"getPrimaryImageRepresentationHref",value:function(){var e=this.getPrimaryImageRepresentation();return e||(e=this.representations&&this.representations.length>0?this.representations[0]:void 0),e?e.getRenditionHref():void 0}},{key:"getThumbnailHref",value:function(){if(this.thumbnail)return this.getProxyRenditionHref(this.thumbnail,1e3)}},{key:"loadPrimaryImageRepresentationHref",value:function(){var e=y.a.defer(),t=this.getPrimaryImageRepresentationHref();if(t){var n=new Image;n.onload=function(){e.resolve()},n.onerror=function(t){e.reject(t)},n.src=t}else e.resolve();return e.promise}},{key:"getPrimaryImageRepresentationType",value:function(){var e=this.getPrimaryImageRepresentation();return e?e.type:"unknown"}},{key:"getRenditionHref",value:function(){return this.getLink("rendition")}},{key:"toJSON",value:function(){return{id:this.id,name:this.name,type:this.type,created:this.created_date,modified:this.modified_date,representations:this.representations}}},{key:"addRepresentationWithMetadata",value:function(e){var t=new x(e);return this.representations.push(t),t}},{key:"size",get:function(){var e=this.getComponentRepresentation();if(e){var t=e.contentLength;if(void 0!==t)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=M.a.getString("file-size-units-bytes"),i=M.a.getString("file-size-units-kilobytes"),r=M.a.getString("file-size-units-megabytes"),o=M.a.getString("file-size-units-gigabytes"),a=M.a.getString("file-size-units-terabytes"),s=M.a.getString("file-size-units-petabytes"),c=M.a.getString("file-size-units-exabytes"),l=M.a.getString("file-size-units-zetabytes"),u=M.a.getString("file-size-units-yottabytes");if(0===e)return"0 Bytes";var h=t<0?0:t,d=[n,i,r,o,a,s,c,l,u],g=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,g)).toFixed(h))+" "+d[g]}(t,1)}}},{key:"createdString",get:function(){return this.getDateString(this.created_date)}},{key:"modifiedString",get:function(){return this.getDateString(this.modified_date)}}]),t}(L.a)},440:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjIxMTAgLTE0MjggMjAgMjAiPjxkZWZzPjxzdHlsZT4uYXtmaWxsOiNmZmY7fS5ie2ZpbGw6IzM1NDE0Yzt9PC9zdHlsZT48L2RlZnM+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQyNSAtMTg3MSkiPjxjaXJjbGUgY2xhc3M9ImEiIGN4PSIxMCIgY3k9IjEwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjg1IDQ0MykiLz48cGF0aCBjbGFzcz0iYiIgZD0iTTU4MC42LDE0Ny4xbC0yLjctMi43LDIuNy0yLjdhLjc3OC43NzgsMCwxLDAtMS4xLTEuMWgwbC0yLjcsMi43LTIuNy0yLjdhLjc3OC43NzgsMCwxLDAtMS4xLDEuMWgwbDIuNywyLjctMi43LDIuN2EuNzc4Ljc3OCwwLDAsMCwxLjEsMS4xaDBsMi43LTIuNywyLjcsMi43YS43NzguNzc4LDAsMCwwLDEuMS0xLjFaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTguMjI1IDMwOC42MjUpIi8+PC9nPjwvc3ZnPg=="},607:function(e,t,n){var i,r;i=[n(16),n(9),n(10),n(2),n(13),n(6),n(110)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s,c,l=new o.default({color:"rebeccapurple",name:"marketingController"}),u=["spark-newsletter"];return c=n.Model.extend({emailListSettings:{},_getBrowserStorage:function(){return this.browserStorage||(this.browserStorage=new a(window.sessionStorage)),this.browserStorage},showedNewsletterPitch:function(){this._showedNewsletterPitch=!0},setNewsletterOptedIn:function(){try{window.sessionStorage.setItem("dismissed-spark-newsletter-pitch","true"),window.localStorage.setItem("spark-newsletter-pitches","4")}catch(e){}},newsletterOptedOut:function(){try{window.sessionStorage.setItem("dismissed-spark-newsletter-pitch","true");var e=parseInt(window.localStorage.getItem("spark-newsletter-pitches")||"1");e++,window.localStorage.setItem("spark-newsletter-pitches",String(e))}catch(t){}},resetNewsletterOptOut:function(){try{window.localStorage.setItem("spark-newsletter-pitches","1"),window.sessionStorage.setItem("dismissed-spark-newsletter-pitch","true")}catch(e){}},getModelForOptinViewIfUserCanReceiveEmail:function(e,i){if(!this.userQualifiesToReceiveEmail())return null;var o=t.assign({mode:e},i||{});return t.isUndefined(o.showGlobalMarketingChoice)&&(o.showGlobalMarketingChoice=!r.getMarketingChoiceForUser()),new n.Model(o)},userQualifiesToReceiveMarketing:function(){var e=!1,n=r.getUserEmail();if(!t.isEmpty(n)&&!r.isEnterprise()&&!r.isAutomatedTestUser()){var i=n.split("@");if(2===i.length){var o=i[1];e=!/(k12)|(usd)|(\.edu)|(\.ac)|(cvsdvt\.org)|(m3-creative\.com)|(merck\.com)|(fedins\.com)/.test(o.toLowerCase())}}return r._isProgressiveProfile()&&(l.warn("[MarketingController] Progressive user profile s